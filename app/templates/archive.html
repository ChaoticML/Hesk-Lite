{% extends 'layout.html' %}
{% block title %}Archief{% endblock %}
{% block content %}
    <h1>Archief</h1>
    
    <div class="search-container">
        <form method="get" action="{{ url_for('main.archive') }}">
            <input type="hidden" name="user" value="{{ user }}">
            <input type="hidden" name="password" value="{{ password }}">
            <input type="search" name="search" placeholder="Zoek in archief..." value="{{ search_query or '' }}">
            <button type="submit">Zoek</button>
        </form>
    </div>

    {% for ticket in tickets %}
        <div class="ticket-summary priority-{{ ticket.priority.lower() }}">
            <h3><a href="{{ url_for('main.view_ticket', ticket_id=ticket.id, user=user, password=password) }}">{{ ticket.title }}</a></h3>
            <p>
                <strong>Status:</strong> {{ ticket.status }} |
                <strong>Prioriteit:</strong> {{ ticket.priority }} |
                <strong>Aanvrager:</strong> {{ ticket.requester_name }} |
                <strong>Toegewezen aan:</strong> {% if ticket.assigned_to %}{{ ticket.assigned_to }}{% else %}Niemand{% endif %}
            </p>
        </div>
    {% else %}
        {% if search_query %}
            <p>Geen gearchiveerde tickets gevonden die overeenkomen met uw zoekopdracht.</p>
        {% else %}
            <p>Geen gearchiveerde tickets gevonden.</p>
        {% endif %}
    {% endfor %}
{% endblock %}